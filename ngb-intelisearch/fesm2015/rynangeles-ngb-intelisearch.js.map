{"version":3,"file":"rynangeles-ngb-intelisearch.js","sources":["../../../projects/ngb-intelisearch/src/lib/ngb-intelisearch.service.ts","../../../projects/ngb-intelisearch/src/lib/ngb-intelisearch.component.ts","../../../projects/ngb-intelisearch/src/lib/ngb-intelisearch.module.ts","../../../projects/ngb-intelisearch/src/public-api.ts","../../../projects/ngb-intelisearch/src/rynangeles-ngb-intelisearch.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgbIntelisearchService {\n\n  constructor() { }\n}\n","import { Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { Observable, Subject, merge, of } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, filter, map, switchMap, tap } from 'rxjs/operators';\nimport * as _ from 'lodash';\nimport { NgbTypeahead } from '@ng-bootstrap/ng-bootstrap';\n\nenum Token {\n  Logical,\n  Key,\n  Operator,\n  Value\n}\nenum KeyCode {\n  Enter = 13,\n  Backspace = 8\n};\n\nconst EnumLength = Enum => {\n  return Object.keys(Enum).map(val => Number(isNaN(Number(val)))).reduce((a, b) => a + b, 0);\n}\n\n@Component({\n  selector: 'ngb-intelisearch[name]',\n  templateUrl: './ngb-intelisearch.component.html',\n  styleUrls: ['./ngb-intelisearch.component.scss']\n})\nexport class NgbIntelisearchComponent implements OnInit {\n  @ViewChild('input', { static: false }) input: ElementRef;\n  @ViewChild('typehead', { static: false }) typehead: NgbTypeahead;\n  @Input() name: string;\n  @Input() keys: (value: any) => Observable<any>;\n  @Input() values: (value: any) => Observable<any>;\n  @Input() logical: (value: any) => Observable<any> = () => of([\n    { value: 'AND', label: 'AND' },\n    { value: 'OR', label: 'OR' }\n  ]);\n  @Input() comparison: (value: any) => Observable<any> = () => of([\n    { value: '=', label: 'equal' },\n    { value: '!=', label: 'not equal' },\n    { value: 'LIKE', label: 'contains' },\n    { value: '>', label: 'greater than' },\n    { value: '<', label: 'less than' }\n  ]);\n  @Output() search: EventEmitter<any> = new EventEmitter();\n  focus$ = new Subject<string>();\n  click$ = new Subject<string>();\n  searchTokens: any[];\n  tokens: any[] = [];\n  token: string[];\n  inputModel: string = '';\n\n  constructor() {\n    this.tokenSearch = this.tokenSearch.bind(this);\n  }\n\n  inputFormatter = (input: { value: string }) => input.value;\n\n  addToken() {\n    const token = this.tokens.length ? [] : [null];\n    this.tokens.push(token);\n    this.token = this.tokens[this.tokens.indexOf(token)];\n  }\n\n  ngOnInit() {\n    this.addToken();\n    this.getSearchTokens();\n  }\n\n  saveSearchTokens() {\n    const tokens = this.getSearchTokens();\n    tokens.push(_.filter(this.tokens, token => token.length));\n    window.localStorage.setItem(`sf:${this.name}`, JSON.stringify(_.takeRight(tokens, 5)));\n  }\n\n  getSearchTokens() {\n    const tokens = window.localStorage.getItem(`sf:${this.name}`);\n    this.searchTokens = JSON.parse(tokens) || [];\n    return this.searchTokens;\n  }\n\n  clearSearchTokens() {\n    window.localStorage.removeItem(`sf:${this.name}`);\n    this.getSearchTokens();\n  }\n\n  tokensToString(tokens) {\n    return _.map(tokens, i => i.join('')).join('&');\n  }\n\n  onSelectRecentSearch(tokens) {\n    this.tokens = tokens;\n    this.addToken();\n    this.search.emit(this.tokens);\n  }\n\n  getInputPlaceholder(token) {\n    let placeholder = 'Search';\n    switch (token.length) {\n      case Token.Logical:\n        placeholder = 'Seach Logical Operator';\n        break;\n      case Token.Key:\n        placeholder = 'Seach Key';\n        break;\n      case Token.Operator:\n        placeholder = 'Seach Comparison Operator';\n        break;\n      case Token.Value:\n        placeholder = 'Seach Value';\n        break;\n      default:\n        placeholder = 'Seach...';\n        break;\n    }\n    return placeholder;\n  }\n  /*\n  TODO:\n  inspect how tokens and queries produced\n  */\n  onTypeheadKeydown(evt?) {\n    const keyCode = (evt.which) ? evt.which : evt.keyCode;\n    switch (keyCode) {\n      case KeyCode.Enter:\n        if (this.inputModel.length > 0) {\n          evt.preventDefault();\n          this.search.emit([...this.tokens, [this.inputModel]]);\n        }\n        if (this.tokens.length > 1 && this.token.length === 0) {\n          evt.preventDefault();\n          this.search.emit(this.tokens);\n          this.saveSearchTokens();\n        }\n        break;\n      case KeyCode.Backspace:\n        if (!this.inputModel.length) {\n          evt.preventDefault();\n          this.input.nativeElement.blur();\n          if (!this.token.length && this.tokens.indexOf(this.token) !== 0) {\n            this.tokens.pop();\n            this.token = _.last(this.tokens);\n          }\n          this.inputModel = this.token.pop() || '';\n          if (this.tokens.length === 1 && this.token.length === 0) {\n            this.tokens.pop();\n            this.addToken();\n          }\n          setTimeout(() => this.input.nativeElement.focus());\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  tokenSearch() {\n    return (text$: Observable<string>) => {\n      const debouncedText$ = text$.pipe(debounceTime(200), distinctUntilChanged());\n      const clicksWithClosedPopup$ = this.click$.pipe(filter(() => !this.typehead.isPopupOpen()));\n      const inputFocus$ = this.focus$;\n      return merge(debouncedText$, inputFocus$, clicksWithClosedPopup$)\n        .pipe(\n          switchMap(term => {\n            let $observable: Observable<any>;\n            switch (this.token.length) {\n              case Token.Logical:\n                $observable = this.logical({ type: 'LOGICAL', property: null, term, count: 10 });\n                break;\n              case Token.Key:\n                $observable = this.keys({ type: 'KEY', property: null, term, count: 10 });\n                break;\n              case Token.Operator:\n                $observable = this.comparison({ type: 'COMPARISON', property: null, term, count: 10 });\n                break;\n              case Token.Value:\n                $observable = this.values({ type: 'VALUE', property: this.token[Token.Key], term, count: 10 });\n                break;\n              default:\n                $observable = of([]);\n                break;\n            }\n            return $observable.pipe(map(list => ({ list, term })));\n          }),\n          map(({ list, term }) => {\n            return _.chain(list)\n              .filter(item => item.toString().toLowerCase().indexOf(term.toLowerCase()) >= 0)\n              .uniq()\n              .slice(0, 10)\n              .value();\n          })\n        );\n    }\n  }\n\n  tokenHandler(evt) {\n    evt.preventDefault();\n    const { value } = evt.item;\n    this.input.nativeElement.blur();\n    this.token.push(value);\n    this.inputModel = '';\n    if (this.token.indexOf(value) === Token.Value) {\n      this.addToken();\n    }\n    setTimeout(() => this.input.nativeElement.focus());\n  }\n\n  selectToken(idx) {\n    const token = this.tokens[idx];\n    if (token.length === EnumLength(Token)) {\n      this.input.nativeElement.blur();\n      this.tokens.pop();\n      this.token = token;\n      this.inputModel = this.token.pop();\n      setTimeout(() => this.input.nativeElement.focus());\n    }\n  }\n\n  removeToken(idx) {\n    this.tokens.splice(idx, 1);\n    this.search.emit(this.tokens);\n  }\n\n  clearTokens() {\n    this.tokens.length = 0;\n    this.search.emit(this.tokens);\n    this.addToken();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { NgbIntelisearchComponent } from './ngb-intelisearch.component';\n\n\n\n@NgModule({\n  declarations: [NgbIntelisearchComponent],\n  imports: [\n    BrowserModule,\n    NgbModule\n  ],\n  exports: [NgbIntelisearchComponent]\n})\nexport class NgbIntelisearchModule { }\n","/*\n * Public API Surface of ngb-intelisearch\n */\n\nexport * from './lib/ngb-intelisearch.service';\nexport * from './lib/ngb-intelisearch.component';\nexport * from './lib/ngb-intelisearch.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["_.filter","_.takeRight","_.map","_.last","filter","map","_.chain"],"mappings":"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"}